<!--pages/pottery-submission/index.wxml-->
<view class="container">
  <view class="page-title">全国大学生陶艺作品展报名表</view>
  
  <form class="submission-form">
    <!-- 个人信息部分 -->
    <view class="form-card">
      <view class="card-title">个人信息</view>
      
      <view class="form-row">
        <view class="form-cell">
          <view class="form-label required">姓名</view>
          <input class="form-input" placeholder="请输入姓名" value="{{name}}" bindinput="inputName"/>
        </view>
        <view class="form-cell">
          <view class="form-label required">性别</view>
          <picker bindchange="bindGenderChange" value="{{genderIndex}}" range="{{genders}}">
            <view class="picker {{gender ? '' : 'placeholder'}}">
              {{gender || '请选择性别'}}
              <text class="picker-arrow">▼</text>
            </view>
          </picker>
        </view>
      </view>
      
      <view class="form-row">
        <view class="form-cell">
          <view class="form-label required">所在学校</view>
          <input class="form-input" placeholder="请输入学校名称" value="{{school}}" bindinput="inputSchool"/>
        </view>
        <view class="form-cell">
          <view class="form-label required">学校省份</view>
          <picker bindchange="bindSchoolProvinceChange" value="{{schoolProvinceIndex}}" range="{{provinces}}">
            <view class="picker {{schoolProvince ? '' : 'placeholder'}}">
              {{schoolProvince || '请选择省份'}}
              <text class="picker-arrow">▼</text>
            </view>
          </picker>
        </view>
      </view>
      
      <view class="form-row">
        <view class="form-cell">
          <view class="form-label required">年级</view>
          <picker bindchange="bindGradeChange" value="{{gradeIndex}}" range="{{grades}}">
            <view class="picker {{grade ? '' : 'placeholder'}}">
              {{grade || '请选择年级'}}
              <text class="picker-arrow">▼</text>
            </view>
          </picker>
        </view>
        <view class="form-cell">
          <view class="form-label required">出生年月</view>
          <picker mode="date" fields="month" bindchange="bindBirthDateChange" value="{{birthDate}}">
            <view class="picker {{birthDate ? '' : 'placeholder'}}">
              {{birthDate || '请选择出生年月'}}
              <text class="picker-arrow">▼</text>
            </view>
          </picker>
        </view>
      </view>
      
      <view class="form-row">
        <view class="form-cell">
          <view class="form-label required">专业</view>
          <input class="form-input" placeholder="请输入专业" value="{{major}}" bindinput="inputMajor"/>
        </view>
        <view class="form-cell">
          <view class="form-label required">联系电话</view>
          <input class="form-input" type="number" placeholder="请输入联系电话" value="{{phone}}" bindinput="inputPhone"/>
        </view>
      </view>
      
      <view class="form-group">
        <view class="form-label required">邮箱</view>
        <input class="form-input" placeholder="请输入邮箱" value="{{email}}" bindinput="inputEmail"/>
      </view>
      
      <view class="form-group">
        <view class="form-label required">身份证号码</view>
        <input class="form-input" placeholder="请输入身份证号码" value="{{idNumber}}" bindinput="inputIdNumber"/>
      </view>
      
      <view class="form-row">
        <view class="form-cell">
          <view class="form-label required">指导老师</view>
          <input class="form-input" placeholder="请输入指导老师姓名" value="{{teacher}}" bindinput="inputTeacher"/>
        </view>
        <view class="form-cell">
          <view class="form-label required">指导老师电话</view>
          <input class="form-input" type="number" placeholder="请输入指导老师电话" value="{{teacherPhone}}" bindinput="inputTeacherPhone"/>
        </view>
      </view>
      
      <view class="form-group">
        <view class="form-label required">邮寄地址</view>
        <input class="form-input" placeholder="请输入作品邮寄地址" value="{{address}}" bindinput="inputAddress"/>
        <view class="form-tip">（也是作品退件地址）</view>
      </view>
      
      <view class="form-group">
        <view class="form-label required">个人照片</view>
        <view class="upload-single">
          <view class="upload-preview" wx:if="{{photoUrl}}">
            <image src="{{photoUrl}}" mode="aspectFill"></image>
            <view class="upload-delete" bindtap="removePhoto">×</view>
          </view>
          <view class="upload-button" bindtap="choosePhoto" wx:else>
            <text class="upload-icon">+</text>
            <text class="upload-text">上传照片</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- 作品信息部分 -->
    <view class="form-card">
      <view class="card-title">作品信息</view>
      
      <!-- 作品类型选择 -->
      <view class="form-group">
        <view class="form-label required">作品类型</view>
        <picker bindchange="bindWorkTypeChange" value="{{workTypeIndex}}" range="{{workTypes}}">
          <view class="picker {{workType ? '' : 'placeholder'}}">
            {{workTypes[workTypeIndex] || '请选择作品类型'}}
            <text class="picker-arrow">▼</text>
          </view>
        </picker>
      </view>
      
      <view class="form-row">
        <view class="form-cell">
          <view class="form-label required">参展作品名称</view>
          <input class="form-input" placeholder="请输入作品名称" value="{{artworkName}}" bindinput="inputArtworkName"/>
        </view>
        <view class="form-cell">
          <view class="form-label required">创作年份</view>
          <picker mode="date" fields="year" bindchange="bindCreateYearChange" value="{{createYear}}">
            <view class="picker {{createYear ? '' : 'placeholder'}}">
              {{createYear || '请选择创作年份'}}
              <text class="picker-arrow">▼</text>
            </view>
          </picker>
        </view>
      </view>
      
      <!-- 作品尺寸（仅常规作品） -->
      <view wx:if="{{workType === 'regular'}}" class="form-group">
        <view class="form-label required">作品尺寸 (CM)</view>
        <view class="dimensions-container">
          <block wx:for="{{dimensions}}" wx:key="index">
            <view class="dimension-group">
              <view class="dimension-inputs">
                <input class="dimension-input" type="digit" placeholder="长" value="{{item.length}}" 
                       data-index="{{index}}" data-field="length" bindinput="inputDimension"/>
                <text class="dimension-separator">×</text>
                <input class="dimension-input" type="digit" placeholder="宽" value="{{item.width}}" 
                       data-index="{{index}}" data-field="width" bindinput="inputDimension"/>
                <text class="dimension-separator">×</text>
                <input class="dimension-input" type="digit" placeholder="高" value="{{item.height}}" 
                       data-index="{{index}}" data-field="height" bindinput="inputDimension"/>
              </view>
              <view class="dimension-actions">
                <button class="dimension-btn remove" bindtap="removeDimension" data-index="{{index}}" 
                        wx:if="{{dimensions.length > 1}}">删除</button>
              </view>
            </view>
          </block>
          <button class="dimension-btn add" bindtap="addDimension">+ 添加尺寸组</button>
        </view>
      </view>
      
      <view class="form-group">
        <view class="form-label required">作品类别</view>
        <picker bindchange="bindCategoryChange" value="{{categoryIndex}}" range="{{categories}}">
          <view class="picker {{category ? '' : 'placeholder'}}">
            {{category || '请选择作品类别'}}
            <text class="picker-arrow">▼</text>
          </view>
        </picker>
        <view class="category-options">
          <text class="category-option">技艺</text>
          <text class="category-option">文脉</text>
          <text class="category-option">算法</text>
          <text class="category-option">产业</text>
          <text class="category-option">视界</text>
        </view>
      </view>
      
      <!-- 作品工艺、材料（仅常规作品） -->
      <view wx:if="{{workType === 'regular'}}" class="form-group">
        <view class="form-label required">作品工艺、材料</view>
        <textarea class="form-textarea" placeholder="请描述作品的工艺和使用的材料（最多20字）" 
                  value="{{craftMaterial}}" bindinput="inputCraftMaterial" maxlength="20"></textarea>
        <view class="char-count">{{craftMaterial.length}}/20</view>
      </view>
      
      <view class="form-group">
        <view class="form-label required">作品简介（200字以内）</view>
        <textarea class="form-textarea" placeholder="请描述您的作品简介..." value="{{artworkDescription}}" bindinput="inputArtworkDescription" maxlength="200"></textarea>
        <view class="char-count">{{artworkDescription.length}}/200</view>
      </view>
      
      <!-- 常规作品图片上传 -->
      <view wx:if="{{workType === 'regular'}}">
        <!-- 透视图上传 -->
        <view class="form-group">
          <view class="form-label required">透视图（1张）</view>
          <view class="upload-single">
            <view class="upload-preview" wx:if="{{perspectiveImage}}">
              <image src="{{perspectiveImage}}" mode="aspectFill"></image>
              <view class="upload-delete" bindtap="removePerspectiveImage">×</view>
            </view>
            <view class="upload-button" bindtap="choosePerspectiveImage" wx:else>
              <text class="upload-icon">+</text>
              <text class="upload-text">上传透视图</text>
            </view>
          </view>
        </view>
        
        <!-- 四面图上传 -->
        <view class="form-group">
          <view class="form-label required">四面图（3张）</view>
          <view class="upload-container">
            <block wx:for="{{fourViewImages}}" wx:key="index">
              <view class="upload-preview">
                <image src="{{item}}" mode="aspectFill"></image>
                <view class="upload-delete" data-index="{{index}}" bindtap="removeFourViewImage">×</view>
              </view>
            </block>
            <view class="upload-button" bindtap="chooseFourViewImages" wx:if="{{fourViewImages.length < 3}}">
              <text class="upload-icon">+</text>
            </view>
          </view>
        </view>
        
        <!-- 局部图上传 -->
        <view class="form-group">
          <view class="form-label required">局部图（3张）</view>
          <view class="upload-container">
            <block wx:for="{{detailImages}}" wx:key="index">
              <view class="upload-preview">
                <image src="{{item}}" mode="aspectFill"></image>
                <view class="upload-delete" data-index="{{index}}" bindtap="removeDetailImage">×</view>
              </view>
            </block>
            <view class="upload-button" bindtap="chooseDetailImages" wx:if="{{detailImages.length < 3}}">
              <text class="upload-icon">+</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- 特殊陈列方式描述（仅常规作品） -->
      <view wx:if="{{workType === 'regular'}}" class="form-group">
        <view class="form-label">特殊陈列方式描述</view>
        <textarea class="form-textarea" placeholder="请描述特殊陈列方式（选填）" 
                  value="{{specialDisplay}}" bindinput="inputSpecialDisplay"></textarea>
      </view>
      
      <!-- 视频作品专用字段 -->
      <view wx:if="{{workType === 'video'}}" class="video-work-section">
        <view class="section-title">视频作品信息</view>
        
        <view class="form-row">
          <view class="form-cell">
            <view class="form-label required">视频时长</view>
            <input class="form-input" placeholder="如：3分30秒" value="{{videoDuration}}" bindinput="inputVideoDuration"/>
          </view>
          <view class="form-cell">
            <view class="form-label required">视频清晰度</view>
            <picker bindchange="bindVideoResolutionChange" value="{{videoResolutionIndex}}" range="{{videoResolutions}}">
              <view class="picker {{videoResolution ? '' : 'placeholder'}}">
                {{videoResolution || '请选择清晰度'}}
                <text class="picker-arrow">▼</text>
              </view>
            </picker>
          </view>
        </view>
        
        <view class="form-row">
          <view class="form-cell">
            <view class="form-label required">视频比例</view>
            <picker bindchange="bindVideoAspectRatioChange" value="{{videoAspectRatioIndex}}" range="{{videoAspectRatios}}">
              <view class="picker {{videoAspectRatio ? '' : 'placeholder'}}">
                {{videoAspectRatio || '请选择比例'}}
                <text class="picker-arrow">▼</text>
              </view>
            </picker>
          </view>
          <view class="form-cell">
            <view class="form-label required">拍摄技巧</view>
            <input class="form-input" placeholder="如：航拍、延时摄影等" value="{{shootingTechnique}}" bindinput="inputShootingTechnique"/>
          </view>
        </view>
        
        <view class="form-group">
          <view class="form-label required">百度云链接</view>
          <input class="form-input" placeholder="请输入百度云分享链接" value="{{baiduCloudLink}}" bindinput="inputBaiduCloudLink"/>
        </view>
        
        <view class="form-group">
          <view class="form-label required">百度云密码</view>
          <input class="form-input" placeholder="请输入百度云提取密码" value="{{baiduCloudPassword}}" bindinput="inputBaiduCloudPassword"/>
        </view>
      </view>
      
      <!-- 上传图片注意事项 -->
      <view wx:if="{{workType === 'regular'}}" class="upload-tips">
        <text>1.像素与格式：像素达到300dpi及以上，采用jpg格式。</text>
        <text>2.图片大小：每张图片大小不小于1MB，不大于5MB。</text>
        <text>3.图片要求：均需白底背景，清晰展示作品细节。</text>
      </view>
      
      <!-- 视频作品注意事项 -->
      <view wx:if="{{workType === 'video'}}" class="upload-tips">
        <text>1.视频格式：支持MP4、MOV、AVI等常见格式。</text>
        <text>2.上传方式：请将视频上传至百度云，并填写分享链接和密码。</text>
        <text>3.内容要求：视频应清晰展示作品全貌和细节。</text>
      </view>
    </view>
    
    <button class="submit-button" bindtap="submitApplication" disabled="{{submitting}}">提交报名</button>
  </form>
</view>