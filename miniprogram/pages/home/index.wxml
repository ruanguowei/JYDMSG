<!-- è½®æ’­å›¾ -->
<view class="banner">
  <swiper wx:if="{{banners.length > 0}}" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{3000}}" duration="{{500}}">
    <swiper-item wx:for="{{banners}}" wx:key="_id">
      <image src="{{item.imageUrl}}" mode="aspectFill" lazy-load="{{true}}"></image>
    </swiper-item>
  </swiper>
  <view wx:else class="banner-placeholder">    <view class="empty-banner"></view>  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view wx:if="{{loading}}" class="loading">
  <view class="loading-spinner"></view>
</view>

<!-- å¿«æ·å…¥å£ -->
<view class="quick-actions">
  <!-- é¢„çº¦å‚è§‚æŒ‰é’® -->
  <view class="quick-action-item" bindtap="navigateToAppointment">
    <view class="quick-action-icon">
      <image src="../../images/icons/calendar.png" mode="aspectFit" class="icon-image"></image>
    </view>
    <text class="quick-action-text">é¢„çº¦å‚è§‚</text>
  </view>
  
  <!-- å¤§é™¶å±•ä¸“åŒºæŒ‰é’® -->
  <view class="quick-action-item" bindtap="navigateToPotteryExhibition">
    <view class="quick-action-icon">
      <image src="../../images/icons/jar-active.png" mode="aspectFit" class="icon-image"></image>
    </view>
    <text class="quick-action-text">å¤§é™¶å±•ä¸“åŒº</text>
  </view>
</view>

<!-- å…¬å‘Šæ  -->
<view class="notice-board">
  <view class="notice-title">æœ€æ–°å…¬å‘Š</view>
  <view class="notice-list">
    <view wx:if="{{notices.length === 0}}" class="notice-empty">æš‚æ— å…¬å‘Š</view>
    <view wx:for="{{notices}}" wx:key="_id" class="notice-item" bindtap="showNoticeDetail" data-id="{{index}}">
      <text class="notice-dot"></text>
      <text class="notice-text">{{item.title}}</text>
    </view>
  </view>
</view>

<!-- å…¬å‘Šè¯¦æƒ…å¼¹çª— -->
<view class="notice-modal" wx:if="{{showModal}}">
  <view class="notice-modal-mask" bindtap="hideModal"></view>
  <view class="notice-modal-content">
    <view class="notice-modal-header">
      <text class="notice-modal-title">{{currentNotice.title}}</text>
      <view class="notice-modal-close" bindtap="hideModal">Ã—</view>
    </view>
    <view class="notice-modal-body">
      <view class="notice-modal-time" wx:if="{{currentNotice.createTime}}">
        {{currentNotice.createTime}}
      </view>
      
      <!-- å¯Œæ–‡æœ¬å†…å®¹åŒºåŸŸ -->
      <view class="notice-modal-content-rich">
        <!-- æ´»åŠ¨ä¸»é¢˜éƒ¨åˆ† -->
        <view class="section" wx:if="{{currentNotice.theme}}">
          <view class="section-title">ğŸ¯ æ´»åŠ¨ä¸»é¢˜</view>
          <view class="section-content">{{currentNotice.theme}}</view>
        </view>
        
        <!-- æ´»åŠ¨æ¿å—éƒ¨åˆ† -->
        <view class="section" wx:if="{{currentNotice.sections}}">
          <view class="section-title">ğŸ“‹ æ´»åŠ¨æ¿å—</view>
          <view class="section-content">{{currentNotice.sections}}</view>
        </view>
        
        
        <!-- æŠ¥åæ–¹æ³•éƒ¨åˆ† -->
        <view class="section" wx:if="{{currentNotice.registrationMethod}}">
          <view class="section-title">ğŸ“ æŠ¥åæ–¹æ³•</view>
          <view class="section-content">{{currentNotice.registrationMethod}}</view>
        </view>
        
        <!-- ä¸»è¦å†…å®¹ -->
        <view class="section" wx:if="{{currentNotice.content}}">
          <view class="section-title">ğŸ“„ è¯¦ç»†å†…å®¹</view>
          <view class="section-content">{{currentNotice.content}}</view>
        </view>
        
        <!-- è”ç³»æ–¹å¼éƒ¨åˆ† -->
        <view class="contact-info" wx:if="{{currentNotice.contactPhone}}">
          <view class="section-title">ğŸ“ å’¨è¯¢ç”µè¯</view>
          <view class="section-content">
            <text class="phone">{{currentNotice.contactPhone}}</text>
            <text wx:if="{{currentNotice.contactPerson}}">ï¼ˆ{{currentNotice.contactPerson}}ï¼‰</text>
          </view>
        </view>
        
        <!-- PDFæ–‡ä»¶éƒ¨åˆ† -->
        <view class="pdf-section" wx:if="{{currentNotice.pdfFiles && currentNotice.pdfFiles.length > 0}}">
          <view class="section-title">ğŸ“„ ç›¸å…³æ–‡ä»¶</view>
          <view class="pdf-list">
            <view wx:for="{{currentNotice.pdfFiles}}" wx:key="index" class="pdf-item" bindtap="previewPDF" data-url="{{item.url}}" data-name="{{item.name}}" data-size="{{item.size}}">
              <view class="pdf-icon">ğŸ“„</view>
              <view class="pdf-info">
                <view class="pdf-name">{{item.name || 'PDFæ–‡ä»¶'}}</view>
                <view class="pdf-size" wx:if="{{item.size}}">{{item.size}}</view>
                <view class="pdf-warning" wx:if="{{item.size && item.size.includes('MB') && parseFloat(item.size) > 10}}">
                  âš ï¸ å¤§æ–‡ä»¶ï¼Œä¸‹è½½æ—¶é—´è¾ƒé•¿
                </view>
              </view>
              <view class="pdf-action">é¢„è§ˆ</view>
            </view>
          </view>
        </view>
        
        <!-- å…¶ä»–é™„ä»¶éƒ¨åˆ† -->
        <view class="attachment-section" wx:if="{{currentNotice.attachments && currentNotice.attachments.length > 0}}">
          <view class="section-title">ğŸ“ å…¶ä»–é™„ä»¶</view>
          <view class="attachment-list">
            <view wx:for="{{currentNotice.attachments}}" wx:key="index" class="attachment-item" bindtap="openAttachment" data-url="{{item.url}}" data-type="{{item.type}}" data-name="{{item.name}}">
              <view class="attachment-icon">{{item.type === 'image' ? 'ğŸ–¼ï¸' : 'ğŸ“'}}</view>
              <view class="attachment-info">
                <view class="attachment-name">{{item.name}}</view>
                <view class="attachment-type">{{item.type === 'image' ? 'å›¾ç‰‡' : 'æ–‡ä»¶'}}</view>
              </view>
              <view class="attachment-action">æ‰“å¼€</view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view> 